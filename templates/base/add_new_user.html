{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="{% static 'favicon.ico' %}" />
    <title>Admin Dashbodard</title>
    <!-- Simple bar CSS -->
    <link rel="stylesheet" href="{% static 'css/simplebar.css' %}" />
    <!-- Fonts CSS -->
    <link
        href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100;0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />
    <!-- Icons CSS -->
    <link rel="stylesheet" href="{% static 'css/feather.css' %}" />
    <!-- Date Range Picker CSS -->
    <link rel="stylesheet" href="{% static 'css/daterangepicker.css' %}" />
    <!-- App CSS -->
    <link rel="stylesheet" href="{% static 'css/app-light.css' %}" id="lightTheme" />
    <link rel="stylesheet" href="{% static 'css/app-dark.css' %}" id="darkTheme" disabled />
</head>

<body class="vertical light">
    <div class="wrapper">
        <!-- . -->
        <nav class="topnav navbar navbar-light">
            <button type="button" class="navbar-toggler text-muted mt-2 p-0 mr-3 collapseSidebar">
                <i class="fe fe-menu navbar-toggler-icon"></i>
            </button>
            <form class="form-inline mr-auto searchform text-muted">
                <input class="form-control mr-sm-2 bg-transparent border-0 pl-4 text-muted" type="search"
                    placeholder="Type	something..." aria-label="Search" />
            </form>
            <ul class="nav">
                <li class="nav-item">
                    <a class="nav-link text-muted my-2" href="#" id="modeSwitcher" data-mode="light">
                        <i class="fe fe-sun fe-16"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted my-2" href="./#" data-toggle="modal" data-target=".modal-shortcut">
                        <span class="fe fe-grid fe-16"></span>
                    </a>
                </li>
                <li class="nav-item nav-notif">
                    <a class="nav-link text-muted my-2" href="./#" data-toggle="modal" data-target=".modal-notif">
                        <span class="fe fe-bell fe-16"></span>
                        <span class="dot dot-md bg-success"></span>
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-muted pr-0" href="#" id="navbarDropdownMenuLink"
                        role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="avatar avatar-sm mt-2">
                            <img src="{% static 'assets/avatars/face-1.jpg' %}" alt="..."
                                class="avatar-img rounded-circle" />
                        </span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                         <a class="dropdown-item" href="{% url 'profile' %}">Profile</a>
             <a class="dropdown-item" href="{% url 'admin_dashboard' %}">Dashboard</a>
              <a class="dropdown-item" href="{% url 'profile_settings' %}">Settings</a>
              <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- . -->
        <aside class="sidebar-left border-right bg-white shadow" id="leftSidebar" data-simplebar>
            <a href="#" class="btn collapseSidebar toggle-btn d-lg-none text-muted ml-2 mt-3" data-toggle="toggle">
                <i class="fe fe-x"><span class="sr-only"></span></i>
            </a>
            <nav class="vertnav navbar navbar-light">
                <!--	nav	bar	-->
                <div class="w-100 mb-4 d-flex">
                    <a class="navbar-brand mx-auto mt-2 flex-fill text-center" href="./index.html">
                        <svg version="1.1" id="logo" class="navbar-brand-img brand-sm"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                            y="0px" viewBox="0	0	120	120" xml:space="preserve">
                            <g>
                                <polygon class="st0" points="78,105	15,105	24,87	87,87		" />
                                <polygon class="st0" points="96,69	33,69	42,51	105,51		" />
                                <polygon class="st0" points="78,33	15,33	24,15	87,15		" />
                            </g>
                        </svg>
                    </a>
                </div>
                <ul class="navbar-nav flex-fill w-100 mb-2">
                    <li class="nav-item dropdown">
                        <a href="#dashboard" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-home fe-16"></i>
                            <span class="ml-3 item-text">Dashboard</span><span class="sr-only">(current)</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="dashboard">
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./index.html"><span
                                        class="ml-1 item-text">Default</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./dashboard-analytics.html"><span
                                        class="ml-1 item-text">Analytics</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./dashboard-sales.html"><span
                                        class="ml-1 item-text">E-commerce</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./dashboard-saas.html"><span class="ml-1 item-text">Saas
                                        Dashboard</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./dashboard-system.html"><span
                                        class="ml-1 item-text">Systems</span></a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <p class="text-muted nav-heading mt-4 mb-1">
                    <span>Components</span>
                </p>
                <ul class="navbar-nav flex-fill w-100 mb-2">

                    <li class="nav-item dropdown">
                            <a href="#ui-elements" data-toggle="collapse" aria-expanded="false"
                                class="dropdown-toggle nav-link">
                                <i class="fe fe-user fe-16"></i>
                                <span class="ml-3 item-text">Users</span>
                            </a>
                        <ul class="collapse list-unstyled pl-4 w-100 show" id="ui-elements">
                            <li class="nav-item ">
                                <a class="nav-link pl-3" href=""><span class="ml-1 item-text">Add new users</span>
                                </a>
                            </li>
                            {% comment %} <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-typograpy.html"><span
                                        class="ml-1 item-text">Typograpy</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-icons.html"><span
                                        class="ml-1 item-text">Icons</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-buttons.html"><span
                                        class="ml-1 item-text">Buttons</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-notification.html"><span
                                        class="ml-1 item-text">Notifications</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-modals.html"><span
                                        class="ml-1 item-text">Modals</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-tabs-accordion.html"><span
                                        class="ml-1 item-text">Tabs & Accordion</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./ui-progress.html"><span
                                        class="ml-1 item-text">Progress</span></a>
                            </li> {% endcomment %}
                        </ul>
                    </li>
                    {% comment %} <li class="nav-item w-100">
                        <a class="nav-link" href="widgets.html">
                            <i class="fe fe-layers fe-16"></i>
                            <span class="ml-3 item-text">Widgets</span>
                            <span class="badge badge-pill badge-primary">New</span>
                        </a>
                    </li> {% endcomment %}
                    <li class="nav-item dropdown">
                        <a href="#forms" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                            <i class="fe fe-credit-card fe-16"></i>
                            <span class="ml-3 item-text">Leads</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="forms">
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./form_elements.html"><span class="ml-1 item-text">Add Leads</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./form_advanced.html"><span
                                        class="ml-1 item-text">Facebook Leads</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./form_validation.html"><span
                                        class="ml-1 item-text">Ringover Leads</span></a>
                            </li>
                            {% comment %} <li class="nav-item">
                                <a class="nav-link pl-3" href="./form_wizard.html"><span
                                        class="ml-1 item-text">Wizard</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./form_layouts.html"><span
                                        class="ml-1 item-text">Layouts</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./form_upload.html"><span class="ml-1 item-text">File
                                        upload</span></a>
                            </li> {% endcomment %}
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#profile" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-user fe-16"></i>
                            <span class="ml-3 item-text">Profile</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="profile">
                            <a class="nav-link pl-3" href="{% url 'profile' %}"><span class="ml-1">Overview</span></a>
                            <a class="nav-link pl-3" href="{% url 'profile_settings' %}"><span
                                    class="ml-1">Settings</span></a>
                            {% comment %} <a class="nav-link pl-3" href="./profile-security.html"><span
                                    class="ml-1">Security</span></a>
                            <a class="nav-link pl-3" href="./profile-notification.html"><span
                                    class="ml-1">Notifications</span></a> {% endcomment %}
                        </ul>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a href="#tables" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                            <i class="fe fe-grid fe-16"></i>
                            <span class="ml-3 item-text">Tables</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="tables">
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./table_basic.html"><span class="ml-1 item-text">Basic
                                        Tables</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./table_advanced.html"><span
                                        class="ml-1 item-text">Advanced Tables</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./table_datatables.html"><span
                                        class="ml-1 item-text">Data Tables</span></a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#charts" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                            <i class="fe fe-pie-chart fe-16"></i>
                            <span class="ml-3 item-text">Charts</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="charts">
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./chart-inline.html"><span class="ml-1 item-text">Inline
                                        Chart</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./chart-chartjs.html"><span
                                        class="ml-1 item-text">Chartjs</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./chart-apexcharts.html"><span
                                        class="ml-1 item-text">ApexCharts</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./datamaps.html"><span
                                        class="ml-1 item-text">Datamaps</span></a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <p class="text-muted nav-heading mt-4 mb-1">
                    <span>Apps</span>
                </p>
                <ul class="navbar-nav flex-fill w-100 mb-2">
                    <li class="nav-item w-100">
                        <a class="nav-link" href="calendar.html">
                            <i class="fe fe-calendar fe-16"></i>
                            <span class="ml-3 item-text">Calendar</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#contact" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-book fe-16"></i>
                            <span class="ml-3 item-text">Contacts</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="contact">
                            <a class="nav-link pl-3" href="./contacts-list.html"><span class="ml-1">Contact
                                    List</span></a>
                            <a class="nav-link pl-3" href="./contacts-grid.html"><span class="ml-1">Contact
                                    Grid</span></a>
                            <a class="nav-link pl-3" href="./contacts-new.html"><span class="ml-1">New
                                    Contact</span></a>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#profile" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-user fe-16"></i>
                            <span class="ml-3 item-text">Profile</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="profile">
                            <a class="nav-link pl-3" href="{% url 'profile' %}"><span class="ml-1">Overview</span></a>
                            <a class="nav-link pl-3" href="{% url 'profile_settings' %}"><span
                                    class="ml-1">Settings</span></a>
                            {% comment %} <a class="nav-link pl-3" href="./profile-security.html"><span
                                    class="ml-1">Security</span></a>
                            <a class="nav-link pl-3" href="./profile-notification.html"><span
                                    class="ml-1">Notifications</span></a> {% endcomment %}
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#fileman" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-folder fe-16"></i>
                            <span class="ml-3 item-text">File Manager</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="fileman">
                            <a class="nav-link pl-3" href="./files-list.html"><span class="ml-1">Files
                                    List</span></a>
                            <a class="nav-link pl-3" href="./files-grid.html"><span class="ml-1">Files
                                    Grid</span></a>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#support" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-compass fe-16"></i>
                            <span class="ml-3 item-text">Help Desk</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="support">
                            <a class="nav-link pl-3" href="./support-center.html"><span class="ml-1">Home</span></a>
                            <a class="nav-link pl-3" href="./support-tickets.html"><span class="ml-1">Tickets</span></a>
                            <a class="nav-link pl-3" href="./support-ticket-detail.html"><span class="ml-1">Ticket
                                    Detail</span></a>
                            <a class="nav-link pl-3" href="./support-faqs.html"><span class="ml-1">FAQs</span></a>
                        </ul>
                    </li>
                </ul>
                <p class="text-muted nav-heading mt-4 mb-1">
                    <span>Extra</span>
                </p>
                <ul class="navbar-nav flex-fill w-100 mb-2">
                    <li class="nav-item dropdown">
                        <a href="#pages" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                            <i class="fe fe-file fe-16"></i>
                            <span class="ml-3 item-text">Pages</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100 w-100" id="pages">
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./page-orders.html">
                                    <span class="ml-1 item-text">Orders</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./page-timeline.html">
                                    <span class="ml-1 item-text">Timeline</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./page-invoice.html">
                                    <span class="ml-1 item-text">Invoice</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./page-404.html">
                                    <span class="ml-1 item-text">Page 404</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./page-500.html">
                                    <span class="ml-1 item-text">Page 500</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./page-blank.html">
                                    <span class="ml-1 item-text">Blank</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#auth" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                            <i class="fe fe-shield fe-16"></i>
                            <span class="ml-3 item-text">Authentication</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="auth">
                            <a class="nav-link pl-3" href="./auth-login.html"><span class="ml-1">Login 1</span></a>
                            <a class="nav-link pl-3" href="./auth-login-half.html"><span class="ml-1">Login
                                    2</span></a>
                            <a class="nav-link pl-3" href="./auth-register.html"><span class="ml-1">Register</span></a>
                            <a class="nav-link pl-3" href="./auth-resetpw.html"><span class="ml-1">Reset
                                    Password</span></a>
                            <a class="nav-link pl-3" href="./auth-confirm.html"><span class="ml-1">Confirm
                                    Password</span></a>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#layouts" data-toggle="collapse" aria-expanded="false"
                            class="dropdown-toggle nav-link">
                            <i class="fe fe-layout fe-16"></i>
                            <span class="ml-3 item-text">Layout</span>
                        </a>
                        <ul class="collapse list-unstyled pl-4 w-100" id="layouts">
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./index.html"><span
                                        class="ml-1 item-text">Default</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./index-horizontal.html"><span class="ml-1 item-text">Top
                                        Navigation</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link pl-3" href="./index-boxed.html"><span
                                        class="ml-1 item-text">Boxed</span></a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <p class="text-muted nav-heading mt-4 mb-1">
                    <span>Documentation</span>
                </p>
                <ul class="navbar-nav flex-fill w-100 mb-2">
                    <li class="nav-item w-100">
                        <a class="nav-link" href="../docs/index.html">
                            <i class="fe fe-help-circle fe-16"></i>
                            <span class="ml-3 item-text">Getting Start</span>
                        </a>
                    </li>
                </ul>
                <div class="btn-box w-100 mt-4 mb-1">
                    <a href="https://themeforest.net/item/tinydash-bootstrap-html-admin-dashboard-template/27511269"
                        target="_blank" class="btn mb-2 btn-primary btn-lg btn-block">
                        <i class="fe fe-shopping-cart fe-12 mx-2"></i><span class="small">Buy now</span>
                    </a>
                </div>
            </nav>
        </aside>
        <!-- / -->

        <!-- data -->
        <main role="main" class="main-content">
            <div class="container-fluid">
                <div class="row justify-content-center">
                    <div class="col-12">
                        {% for fu in filtered_user %}
                        <h1 class="page-title">Hello {{fu}} ✌</h1>
                        {% endfor %}
                        <h2 class="mb-2 page-title">Users table</h2>
                        <p class="card-text">
                            <button type="button" class="btn mb-2 btn-outline-success btn-lg" data-toggle="modal"
                                data-target=".bd-example-modal-lg">Add New User</button>
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="userModalLabel">Add New User</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="user-form" data-url="{% url 'check_username' %}" method="post"
                                action="{% url 'save_user' %}">
                                {% csrf_token %}
                                <div class="mx-auto text-center">
                                    <h2 class="m-3">Add New User</h2>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <!-- <label for="Username">Username</label> -->
                                        <input type="Username" name="Username" id="Username" class="form-control"
                                            placeholder="User Name" required autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <!-- <label for="Email">Email</label> -->
                                        <input type="email" name="Email" id="Email" class="form-control"
                                            placeholder="Email" required autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <!-- <label for="firstname">Firstname</label> -->
                                        <input type="text" name="firstname" id="firstname" class="form-control"
                                            placeholder="First Name" required autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <!-- <label for="lastname">Lastname</label> -->
                                        <input type="text" name="lastname" id="lastname" class="form-control"
                                            placeholder="Last Name" required autocomplete="off">
                                    </div>
                                    <!--  -->
                                    <div class="form-group col-md-12">
                                        <div class="row">
                                            <label class="col-md-2 pt-0">User Profiles</label>
                                            <div class="col-md-10">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="user_type"
                                                        id="user_type_advisor" value="Advisor" required>
                                                    <label class="form-check-label"
                                                        for="user_type_advisor">Advisor</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="user_type"
                                                        id="user_type_sales" value="Sales" required>
                                                    <label class="form-check-label" for="user_type_sales">Sales</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="user_type"
                                                        id="user_type_admin" value="Admin" required>
                                                    <label class="form-check-label" for="user_type_admin">Admin</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-group col-md-6">
                                        <!-- <label for="password">New Password</label> -->
                                        <input type="password" name="password" class="form-control" id="password"
                                            placeholder="Password" required>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <!-- <label for="confirm_password">Confirm Password</label> -->
                                        <input type="password" name="confirm_password" class="form-control"
                                            id="confirm_password" placeholder="Confirm Password" required>
                                    </div>
                                </div>
                                <div class="modal-footer"> 
                                    <button type="button" class="btn mb-2 btn-secondary"
                                        data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn mb-2 btn-success">Add New User</button>
                                </div>
                                <!-- <p class="mt-5 mb-3 text-muted text-center">© 2020</p> -->
                            </form>

                        </div>
                    </div>
                </div>
            </div>
            <script>
                function sendEmail(userId) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', '/base/sendemail/?user_id=' + userId, true);
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                            alert("Email has been sent!");
                        }
                    };
                    xhr.send();
                }

                function deleteUser(userId) {
                    // Create an AJAX request to the `delete-user` URL
                    var xhr = new XMLHttpRequest();
                    var id = document.getElementById('delete-user-' + userId).getAttribute('data-url');
                    var csrfToken = document.getElementById('csrfmiddlewaretoken').value;
                    xhr.open('POST', id, true);
                    xhr.setRequestHeader('Content-Type', 'application/json');
                    xhr.setRequestHeader('X-CSRFToken', csrfToken);
                    // Send the request
                    xhr.send();
                    // Handle the response
                    xhr.onload = function() {
                        if (xhr.status === 200) {
                            // The user was deleted successfully
                            var data = JSON.parse(xhr.responseText);
                            Swal.fire(
                                'Success!',
                                'User deleted successfully!',
                                'success'
                            ).then(function() {
                                window.location.reload();
                            });
                        } else {
                            // An error occurred
                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: 'An error occurred!...',
                            });
                        }
                    };
                }
            </script>
            </p>
            <div class="row my-4">
                <!--	Small	table	-->
                <div class="col-md-12">
                    <div class="card shadow">
                        <div class="card-body">
                            <!--	table	-->
                            <table class="table datatables" id="dataTable-1">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>Sl No.</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>User Name</th>
                                        <th>Email</th>
                                        <th>Address</th>
                                        <th>Date Joined</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody class="table-bordered">
                                    {% for vau in view_all_users %}
                                    <tr>
                                        <td>
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" />
                                                <label class="custom-control-label"></label>
                                            </div>
                                        </td>
                                        <td>
                                            {{forloop.counter}}
                                        </td>

                                        <td>
                                            {{vau.first_name}}
                                        </td>
                                        <td>
                                            {{vau.last_name}}
                                        </td>
                                        <td>
                                            {{vau}}
                                        </td>
                                        <td>
                                            {{vau.email}}
                                        </td>
                                        <td>
                                            <!-- {{vau}} -->
                                        </td>
                                        <td>
                                            {{vau.date_joined}}
                                        </td>
                                        <td>
                                            {% comment %} <div class="dropdown">
                                                <button class="btn btn-sm dropdown-toggle" type="button" id="dr4"
                                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <span class="text-muted sr-only">Action</span>
                                                </button> {% endcomment %}
                                                <div class="dropdown">
                                                    <button class="btn btn-sm dropdown-toggle" type="button" id="dr4"
                                                        data-toggle="dropdown" aria-haspopup="true"
                                                        aria-expanded="false">
                                                        <span class="text-muted sr-only">Action</span>
                                                    </button>
                                                    <div class="dropdown-menu dropdown-menu-right"
                                                        aria-labelledby="dr4">
                                                        {% comment %} <a class="dropdown-item" href="javascript:void(0)"
                                                            onclick="send_cemail('{{ vau.id }}')">Invite</a>
                                                        {% endcomment %}
                                                        <a class="dropdown-item" href="javascript:void(0)"
                                                            onclick="sendEmail('{{ vau.id }}')"
                                                            id="send-mail-{{ vau.id }}">Invite</a>
                                                        <a class="dropdown-item" href="javascript:void(0)"
                                                            data-toggle="modal"
                                                            data-target="#editModal-{{ vau.id }}">Edit</a>

                                                        <a class="dropdown-item" href="javascript:void(0)"
                                                            onclick="deleteUser('{{ vau.id }}')"
                                                            id="delete-user-{{ vau.id }}"
                                                            data-url="{% url 'delete-user' vau.id %}">Remove</a>
                                                    </div>
                                                </div>

                                                {% comment %} <script>
                                                    function sendemail(userId) {
                                                        var xhr = new XMLHttpRequest();
                                                        xhr.open('GET', 'sendemail/?user_id=' + userId, true);
                                                        xhr.onreadystatechange = function() {
                                                            if (xhr.readyState === XMLHttpRequest.DONE && xhr
                                                                .status === 200) {
                                                                alert("Email has been sent!");
                                                            }
                                                        };
                                                        xhr.send();
                                                    }
                                                </script> {% endcomment %}

                                                <!-- Edit User Modal -->
                                                <div class="modal fade" id="editModal-{{ vau.id }}" tabindex="-1"
                                                    role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="editModalLabel">Edit User
                                                                </h5>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <form id="editForm-{{ vau.id }}" method="post"
                                                                    action="{% url 'edit-user' vau.id %}">
                                                                    {% csrf_token %}
                                                                    <!-- Add form fields for user data editing -->
                                                                    <div class="form-row">
                                                                        <div class="form-group col-md-6">
                                                                            <input type="text" name="Username"
                                                                                id="Username" class="form-control"
                                                                                placeholder="User Name"
                                                                                value="{{ vau.username }}" required
                                                                                autocomplete="off">
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <input type="email" name="Email" id="Email"
                                                                                class="form-control" placeholder="Email"
                                                                                value="{{ vau.email }}" required
                                                                                autocomplete="off">
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <input type="text" name="firstname"
                                                                                id="firstname" class="form-control"
                                                                                placeholder="First Name"
                                                                                value="{{ vau.first_name }}" required
                                                                                autocomplete="off">
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <input type="text" name="lastname"
                                                                                id="lastname" class="form-control"
                                                                                placeholder="Last Name"
                                                                                value="{{ vau.last_name }}" required
                                                                                autocomplete="off">
                                                                        </div>
                                                                        <div class="form-group col-md-12">
                                                                            <div class="row">
                                                                                <label class="col-md-2 pt-0">User
                                                                                    Profiles</label>
                                                                                <div class="col-md-10">
                                                                                    <div
                                                                                        class="form-check form-check-inline">
                                                                                        <input class="form-check-input"
                                                                                            type="radio"
                                                                                            name="user_type"
                                                                                            id="user_type_advisor"
                                                                                            value="Advisor"
                                                                                            {% if vau.user_type == 'Advisor' %}checked{% endif %}
                                                                                            required>
                                                                                        <label class="form-check-label"
                                                                                            for="user_type_advisor">Advisor</label>
                                                                                    </div>
                                                                                    <div
                                                                                        class="form-check form-check-inline">
                                                                                        <input class="form-check-input"
                                                                                            type="radio"
                                                                                            name="user_type"
                                                                                            id="user_type_sales"
                                                                                            value="Sales"
                                                                                            {% if vau.user_type == 'Sales' %}checked{% endif %}
                                                                                            required>
                                                                                        <label class="form-check-label"
                                                                                            for="user_type_sales">Sales</label>
                                                                                    </div>
                                                                                    <div
                                                                                        class="form-check form-check-inline">
                                                                                        <input class="form-check-input"
                                                                                            type="radio"
                                                                                            name="user_type"
                                                                                            id="user_type_admin"
                                                                                            value="Admin"
                                                                                            {% if vau.user_type == 'Admin' %}checked{% endif %}
                                                                                            required>
                                                                                        <label class="form-check-label"
                                                                                            for="user_type_admin">Admin</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <input type="password" name="password"
                                                                                class="form-control" id="password"
                                                                                placeholder="Password" required>
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <input type="password"
                                                                                name="confirm_password"
                                                                                class="form-control"
                                                                                id="confirm_password"
                                                                                placeholder="Confirm Password" required>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary"
                                                                    data-dismiss="modal">Close</button>
                                                                <button type="button" class="btn btn-primary"
                                                                    onclick="updateUser('{{ vau.id }}')">Save</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <script>
                                                    function updateUser(userId) {
                                                        var form = document.getElementById('editForm-' + userId);
                                                        var formData = new FormData(form);
                                                        var xhr = new XMLHttpRequest();
                                                        xhr.open('POST', form.action, true);
                                                        xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
                                                        xhr.onreadystatechange = function() {
                                                            if (xhr.readyState === 4 && xhr.status === 200) {
                                                                var response = JSON.parse(xhr.responseText);
                                                                if (response.success) {
                                                                    // Perform any other desired actions
                                                                    $('#editModal-' + userId).modal('hide');
                                                                    alert('User data updated successfully!');
                                                                    location.reload(); // Reload the page
                                                                }
                                                            }
                                                        };
                                                        xhr.send(formData);
                                                    }
                                                </script>

                                        </td>
                                    </tr>

                                    {% endfor %}

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!--	simple	table	-->
            </div>
            <!--	end	section	-->
    </div>
    <!--	.col-12	-->
    </div>
    <!--	.row	-->
    <input type="hidden" name="csrfmiddlewaretoken" id="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <!--	.container-fluid	-->
    <div class="modal fade modal-notif modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="defaultModalLabel">
                        Notifications
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="list-group list-group-flush my-n3">
                        <div class="list-group-item bg-transparent">
                            <div class="row align-items-center">
                                <div class="col-auto">
                                    <span class="fe fe-box fe-24"></span>
                                </div>
                                <div class="col">
                                    <small><strong>Package has uploaded successfull</strong></small>
                                    <div class="my-0 text-muted small">
                                        Package is zipped and uploaded
                                    </div>
                                    <small class="badge badge-pill badge-light text-muted">1m ago</small>
                                </div>
                            </div>
                        </div>
                        <div class="list-group-item bg-transparent">
                            <div class="row align-items-center">
                                <div class="col-auto">
                                    <span class="fe fe-download fe-24"></span>
                                </div>
                                <div class="col">
                                    <small><strong>Widgets are updated successfull</strong></small>
                                    <div class="my-0 text-muted small">
                                        Just create new layout Index, form, table
                                    </div>
                                    <small class="badge badge-pill badge-light text-muted">2m ago</small>
                                </div>
                            </div>
                        </div>
                        <div class="list-group-item bg-transparent">
                            <div class="row align-items-center">
                                <div class="col-auto">
                                    <span class="fe fe-inbox fe-24"></span>
                                </div>
                                <div class="col">
                                    <small><strong>Notifications have been sent</strong></small>
                                    <div class="my-0 text-muted small">
                                        Fusce dapibus, tellus ac cursus commodo
                                    </div>
                                    <small class="badge badge-pill badge-light text-muted">30m ago</small>
                                </div>
                            </div>
                            <!--	/	.row	-->
                        </div>
                        <div class="list-group-item bg-transparent">
                            <div class="row align-items-center">
                                <div class="col-auto">
                                    <span class="fe fe-link fe-24"></span>
                                </div>
                                <div class="col">
                                    <small><strong>Link was attached to menu</strong></small>
                                    <div class="my-0 text-muted small">
                                        New layout has been attached to the menu
                                    </div>
                                    <small class="badge badge-pill badge-light text-muted">1h ago</small>
                                </div>
                            </div>
                        </div>
                        <!--	/	.row	-->
                    </div>
                    <!--	/	.list-group	-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">
                        Clear All
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade modal-shortcut modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="defaultModalLabel">Shortcuts</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body px-5">
                    <div class="row align-items-center">
                        <div class="col-6 text-center">
                            <div class="squircle bg-success justify-content-center">
                                <i class="fe fe-cpu fe-32 align-self-center text-white"></i>
                            </div>
                            <p>Control area</p>
                        </div>
                        <div class="col-6 text-center">
                            <div class="squircle bg-primary justify-content-center">
                                <i class="fe fe-activity fe-32 align-self-center text-white"></i>
                            </div>
                            <p>Activity</p>
                        </div>
                    </div>
                    <div class="row align-items-center">
                        <div class="col-6 text-center">
                            <div class="squircle bg-primary justify-content-center">
                                <i class="fe fe-droplet fe-32 align-self-center text-white"></i>
                            </div>
                            <p>Droplet</p>
                        </div>
                        <div class="col-6 text-center">
                            <div class="squircle bg-primary justify-content-center">
                                <i class="fe fe-upload-cloud fe-32 align-self-center text-white"></i>
                            </div>
                            <p>Upload</p>
                        </div>
                    </div>
                    <div class="row align-items-center">
                        <div class="col-6 text-center">
                            <div class="squircle bg-primary justify-content-center">
                                <i class="fe fe-users fe-32 align-self-center text-white"></i>
                            </div>
                            <p>Users</p>
                        </div>
                        <div class="col-6 text-center">
                            <div class="squircle bg-primary justify-content-center">
                                <i class="fe fe-settings fe-32 align-self-center text-white"></i>
                            </div>
                            <p>Settings</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>

    <!-- Include Bootstrap and jQuery dependencies -->
    {% comment %} <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> {% endcomment %}
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/moment.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/simplebar.min.js' %}"></script>
    <script src="{% static 'js/daterangepicker.js' %}"></script>
    <script src="{% static 'js/jquery.stickOnScroll.js' %}"></script>
    <script src="{% static 'js/tinycolor-min.js' %}"></script>
    <script src="{% static 'js/config.js' %}"></script>
    <script src="{% static 'js/apps.js' %}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $(document).ready(function() {
            $("#user-form").validate({
                rules: {
                    Username: {
                        required: true,
                        remote: {
                            url: $("#user-form").data("url"),
                            type: 'POST',
                            data: {
                                Username: function() {
                                    return $("#Username").val();
                                },
                            },
                        },
                    },
                    password: {
                        required: true,
                        minlength: 5
                    },
                    confirm_password: {
                        required: true,
                        equalTo: "#password"
                    },
                    user_type: {
                        required: true
                    }
                },
                messages: {
                    Username: {
                        required: "Please enter a username",
                        remote: "Username already exists"
                    },
                    password: {
                        required: "Please Fill the Empty Box",
                        minlength: "Your password must be at least 5 characters long"
                    },
                    confirm_password: {
                        required: "Please Fill the Empty Box",
                        equalTo: "Password is Not Matched"
                    },
                    user_type: {
                        required: "Please select a profile"
                    }
                },
                errorPlacement: function(error, element) {
                    error.addClass("invalid-feedback");
                    element.closest(".form-group").append(error);
                },
                highlight: function(element, errorClass, validClass) {
                    $(element).addClass("is-invalid").removeClass("is-valid");
                },
                unhighlight: function(element, errorClass, validClass) {
                    $(element).removeClass("is-invalid").addClass("is-valid");
                },
                //https://sweetalert2.github.io (Need to explore more)
                submitHandler: function(form) {
                    Swal.fire(
                        'Good job!',
                        'User Registerd!!!',
                        'success'
                    ).then(function() {
                        form.submit();
                    });
                }
            });
        });
    </script>
</body>
</main>

</html>